# Example environment configuration for altcha
# Copy to .env and adjust values as needed

# REQUIRED: change this to a long random string, do NOT use the default
SECRET=change-me-to-a-long-random-string

# Optional settings
PORT=3000
# CORS_ORIGIN=https://site-a.example.com,https://site-b.example.com

# Challenge expiry in minutes (user must submit within this time)
EXPIREMINUTES=10
# PoW complexity (higher = harder for client browser)
COMPLEXITY=1000000
# Token cache size for reuse prevention (memory/sqlite only, redis uses TTL)
MAXRECORDS=1000

# Rate limit: requests per second per IP (0 or unset = unlimited)
# RATE_LIMIT=20

# Token store: memory (default), sqlite, redis
STORE=memory
# SQLITE_PATH=data/altcha.db
# REDIS_URL=redis://localhost:6379
# REDIS_CLUSTER=false

# Log level: "info" (API only) or "debug" (API + demo)
LOG_LEVEL=info

# Enable a demo page when true
DEMO=false
# Demo server port (default: 8000)
# DEMO_PORT=8000

# --- Analytics ---
# Set POSTGRES_URL to enable request analytics (used by both server and dashboard)
# POSTGRES_URL=postgres://user:pass@localhost:5432/altcha?sslmode=disable

# GeoIP: path to MaxMind GeoLite2-Country.mmdb (optional, enables location stats)
# GEOIP_DB=GeoLite2-Country.mmdb

# --- Dashboard ---
# DASHBOARD_PORT=9000

# Auth provider for dashboard: "basic" or "keycloak"
# AUTH_PROVIDER=basic

# Basic auth credentials
# AUTH_USERNAME=admin
# AUTH_PASSWORD=admin

# Keycloak (OIDC) settings
# AUTH_ISSUER=https://keycloak.example.com/realms/myrealm
# AUTH_CLIENT_ID=altcha-dashboard
# AUTH_CLIENT_SECRET=
# AUTH_PKCE=true

# OIDC endpoint overrides (auto-discovered from AUTH_ISSUER by default)
# AUTH_AUTHORIZATION_ENDPOINT=
# AUTH_TOKEN_ENDPOINT=
# AUTH_END_SESSION_ENDPOINT=
# AUTH_JWKS_URI=

# Access control (comma-separated, OR logic; empty = allow all authenticated users)
# AUTH_ALLOWED_USERS=admin,operator
# AUTH_ALLOWED_GROUPS=/dashboard-admins
# AUTH_ALLOWED_ROLES=dashboard-admin
